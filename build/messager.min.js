var Messager=function(i){var t={_bindList:{},_window:null,_remoteWindow:null,_local:null,_remote:null,init:function(i){if(void 0===i.remoteWindow||void 0===i.local||void 0===i.remote)throw"Missing Parameters";this._window=window,i.localWindow&&(this._window=i.localWindow),this._remoteWindow=i.remoteWindow,this._local=i.local,this._remote=i.remote,this._window.addEventListener?this._window.addEventListener("message",this._dispatch.bind(this),!1):this._window.attachEvent("onmessage",this._dispatch)},bind:function(i,t){this._bindList[i]=t},_dispatch:function(i){if(i.origin==this._remote){var t={data:null};t=JSON.parse(i.data),"function"==typeof this._bindList[t.type]&&this._bindList[t.type].apply(this._window,[t.data])}},send:function(i,t){t||(t={});var n={};n.data=t,n.type=i,this._remoteWindow.postMessage(JSON.stringify(n),this._remote)}};return t.init(i),t};